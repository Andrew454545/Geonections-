:root{
  --bg:#0f1115; --text:#e7eaf0; --muted:#9aa3b2; --card:#151a24;
  --border:#222b3a; --accent:#6ea8fe; --accent2:#b8f0ff;
  --bad:#ff6b6b;
  --easy:#FACC15; --medium:#14B8A6; --hard:#A855F7; --expert:#EF4444;
  --header-h:56px;
  --page-pad:10px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  padding-top:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  max-width: 100dvw;
  overflow-x:hidden;
}

.container{
  max-width:98vw;
  margin:0 auto;
  padding:0 var(--page-pad);
}

/* Header (not sticky) */
.site-header{
  position:static;
  height:var(--header-h);
  z-index:50;
  background:rgba(15,17,21,.86);
  backdrop-filter:blur(8px);
  border-bottom:1px solid var(--border);
}
.header-inner{
  height:100%; display:flex; align-items:center; justify-content:space-between;
  padding:0 var(--page-pad);
}
.logo{margin:0;font-size:1.25rem;letter-spacing:.3px}
.status{display:flex;gap:1rem;color:var(--muted)}

/* Controls */
.controls{display:flex;gap:.5rem;padding:.6rem 0 .7rem;flex-wrap:wrap}
.btn{
  padding:.5rem .85rem;border-radius:.7rem;
  border:1px solid var(--border);
  background:#141a25;color:var(--text);cursor:pointer
}
.btn:hover{filter:brightness(1.08)}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn.primary{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#0b0b0b;border:none
}

/* Board */
.board {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: .6rem;
  width: 100%;
  max-width: 100%;
  height: 98dvh;
  max-height: 98dvh;
  justify-items: center;
  align-items: center;
}

.tile {
  position: relative;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--card);
  width: 100%;
  height: 100%;
  max-height: 100%;
  cursor: pointer;
  transition: transform .05s ease;
  place-self: center;
  overflow: hidden;
  /* make a new stacking context so z-index works predictably */
  isolation: isolate;

  display: flex;
  justify-content: center; /* h-center */
  align-items: center;     /* v-center */
}
.tile:active {
  transform: scale(.995);
}
.tile.selected::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 1;
  box-shadow: inset 0 0 0 16px var(--ring-color, #6ea8fe);
}

.tile.g1 { --ring-color: #FACC15; }  /* easy */
.tile.g2 { --ring-color: #14B8A6; }  /* medium */
.tile.g3 { --ring-color: #A855F7; }  /* hard */
.tile.g4 { --ring-color: #EF4444; }  /* expert */
.tile.locked {
  cursor: default;
  filter: saturate(.9) brightness(.95);
}

/* Guess form */
.guess-form {
  position: absolute;
  bottom: 20px;
  left: 20px;
  right: 20px;
  background: rgba(15, 17, 21, 0.9);
  backdrop-filter: blur(8px);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  z-index: 100;
}

.guess-form label {
  display: block;
  margin-bottom: 8px;
  color: var(--text);
  font-weight: 500;
}

.guess-form input {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--card);
  color: var(--text);
  margin-bottom: 12px;
}

.guess-form button {
  width: 100%;
  margin-bottom: 12px;
}

.guess-feedback {
  text-align: center;
  padding: 8px;
  border-radius: 6px;
  font-weight: 500;
}

.guess-feedback.correct {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
}

.guess-feedback.incorrect {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
}
.tile img{
  position:absolute;
  inset:0;        /* top/right/bottom/left: 0 */
  width:100%;
  height:100%;
  display:block;
  object-fit:cover;
  object-position:center;
  z-index: 0;
}


/* rings */
.tile.ring::after{
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  box-shadow:0 0 0 20px var(--ring-color) inset;
}

/* solved strip */
.solved{display:grid;grid-template-columns:1fr;gap:.65rem;margin:.6rem 0 .9rem}
.solved-group{
  display:grid;grid-template-columns:repeat(4,80px) 1fr;align-items:center;gap:.5rem;
  padding:.5rem;border-radius:.9rem;border:1px solid var(--border);background:#131b26
}
.solved-label{font-weight:700;color:#eaeef6}
@media (max-width:640px){.solved-group{grid-template-columns:repeat(4,64px) 1fr}}

/* Messages & footer */
.messages{min-height:1.2em;margin:.6rem 0 1rem;color:var(--muted)}
.site-footer{color:var(--muted);border-top:1px solid var(--border);padding:1rem 0 1.3rem;margin-top:.8rem}

/* ---- Fullscreen modal ---- */
.modal{position:fixed; inset:0; z-index:1000; display:block;}
.modal.hidden{display:none;}
.modal-backdrop{display:none;}
.modal-body{
  position:fixed; inset:0; width:100vw; height:100vh;
  margin:0; padding:0; background:#000;
  border:none; border-radius:0; overflow:hidden; box-shadow:none;
}
.pano{position:absolute; inset:0; background:#000}
.freeze-overlay{position:absolute; inset:0; z-index:1000; background:transparent; pointer-events:auto;}
.close{
  position:fixed; top:12px; right:12px; z-index:1001;
  background:rgba(0,0,0,.55); color:#fff;
  border:1px solid rgba(255,255,255,.2);
  border-radius:.6rem; padding:.35rem .6rem; cursor:pointer;
}
.guess-form{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:16px; z-index:1001;
  display:flex; gap:.5rem; align-items:center;
  background:rgba(10,12,16,.6); backdrop-filter:blur(6px);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px; padding:.5rem .75rem;
}
.guess-form label span{display:block;font-size:.85rem;color:var(--muted)}
.guess-form input{
  min-width:240px; padding:.55rem .7rem;
  border:1px solid rgba(255,255,255,.12);
  border-radius:.75rem; background:#0b1220; color:var(--text);
}
.guess-feedback{margin-left:.5rem}
.guess-feedback.correct{color:#3fcf8e}
.guess-feedback.incorrect{color:#ff6b6b}

/* Dev mode country code overlay */
.dev-country-code {
  position: absolute;
  top: 8px;
  left: 8px;
  background: rgba(0, 0, 0, 0.85);
  color: white;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 700;
  font-family: monospace;
  z-index: 10;
  pointer-events: none;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.2);
}